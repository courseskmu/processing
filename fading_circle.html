<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Special Effect: A Fading Circle &mdash; CMPT 166 Fall 2016 1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CMPT 166 Fall 2016 1 documentation" href="index.html" />
    <link rel="next" title="Special Effect: Throwing a Ball" href="ball_throw.html" />
    <link rel="prev" title="Example: A Bouncing Ball" href="bouncing_ball.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ball_throw.html" title="Special Effect: Throwing a Ball"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="bouncing_ball.html" title="Example: A Bouncing Ball"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Special Effect: A Fading Circle</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#organizing-our-demo-program">Organizing Our Demo Program</a></li>
<li><a class="reference internal" href="#first-draft-just-the-circle">First Draft: Just the Circle</a></li>
<li><a class="reference internal" href="#adding-fading">Adding Fading</a></li>
<li><a class="reference internal" href="#fading-in-and-fading-out">Fading in and Fading Out</a></li>
<li><a class="reference internal" href="#bouncing-and-fading">Bouncing and Fading</a></li>
<li><a class="reference internal" href="#questions">Questions</a></li>
<li><a class="reference internal" href="#programming-questions">Programming Questions</a></li>
<li><a class="reference internal" href="#the-fading-circle-program">The Fading Circle Program</a></li>
<li><a class="reference internal" href="#the-pulsing-circle-program">The Pulsing Circle Program</a></li>
<li><a class="reference internal" href="#the-bouncing-and-pulsing-circle-program">The Bouncing and Pulsing Circle Program</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="bouncing_ball.html"
                        title="previous chapter">Example: A Bouncing Ball</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ball_throw.html"
                        title="next chapter">Special Effect: Throwing a Ball</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="special-effect-a-fading-circle">
<h1>Special Effect: A Fading Circle<a class="headerlink" href="#special-effect-a-fading-circle" title="Permalink to this headline">¶</a></h1>
<p>In these notes you will learn:</p>
<ul class="simple">
<li>How to make an object fade away by changing its transparency.</li>
<li>How to make an object &#8220;pulse&#8221; by repeatedly fading in and out.</li>
<li>How to make an object bounce around the screen while pulsing.</li>
</ul>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>So far, all the animations we&#8217;ve created <em>move</em> an object by changing
its position. In this note we will see another kind of animation:
<em>fading</em>.</p>
</div>
<div class="section" id="organizing-our-demo-program">
<h2>Organizing Our Demo Program<a class="headerlink" href="#organizing-our-demo-program" title="Permalink to this headline">¶</a></h2>
<p>The first step in writing any program is to decide exactly what it should do.
Since we are writing a demonstration of a new kind of animation, we want to
keep it relatively simple. So lets agree that the program works as follows:
when the user clicks on the screen, a circle appears at the click-point and
then slowly fades away to invisibility.</p>
<p>We&#8217;ll need variables to store its (x, y) center. The circle won&#8217;t (initially)
be moving or changing shape, so we don&#8217;t need <code class="docutils literal"><span class="pre">dx</span></code>, <code class="docutils literal"><span class="pre">dy</span></code>, or <code class="docutils literal"><span class="pre">diam</span></code>.</p>
<p>How do we get the circle to fade? Fading means that the circle starts out
totally opaque (i.e. not see-through), and then slowly becomes more
transparent.</p>
<p>Recall that <a class="reference external" href="http://processing.org/">Processing</a> lets you specify the <a class="reference internal" href="glossary.html#term-alpha-value"><span class="xref std std-term">alpha value</span></a> of a color,
which sets its transparency. Alpha values in <a class="reference external" href="http://processing.org/">Processing</a> range from 0 to 255,
where 0 is totally transparent (i.e. invisible), and 255 is totally opaque
(i.e. not transparent at all).</p>
<p>So we will implement fading by slowly decreasing the alpha value of
the circle&#8217;s fill color.</p>
</div>
<div class="section" id="first-draft-just-the-circle">
<h2>First Draft: Just the Circle<a class="headerlink" href="#first-draft-just-the-circle" title="Permalink to this headline">¶</a></h2>
<p>Lets write a program that displays a big blue circle wherever the user
clicks with the mouse. There is no fading yet; we&#8217;ll add that next
after we get this working:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">float</span> <span class="n">x</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">y</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>
  <span class="n">smooth</span><span class="o">();</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>
  <span class="n">noStroke</span><span class="o">();</span>
  <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">);</span>
  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">150</span><span class="o">,</span> <span class="mi">150</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">mousePressed</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">mouseX</span><span class="o">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">mouseY</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Recall that the <code class="docutils literal"><span class="pre">mousePressed()</span></code> function is automatically called by
<a class="reference external" href="http://processing.org/">Processing</a> whenever the user clicks a mouse button. When it&#8217;s called
here, it sets <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">y</span></code> to be the position of the mouse, and so
when <code class="docutils literal"><span class="pre">draw()</span></code> is called the circle will be drawn centered at the
most recent mouse-click.</p>
</div>
<div class="section" id="adding-fading">
<h2>Adding Fading<a class="headerlink" href="#adding-fading" title="Permalink to this headline">¶</a></h2>
<p>Now lets add the fading effect. We&#8217;ll need a variable to keep track of
the current transparency:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">float</span> <span class="n">transparency</span><span class="o">;</span>  <span class="c1">// ranges from 0 to 1 (0 = totally transparent)</span>
</pre></div>
</div>
<p>Lets agree that <code class="docutils literal"><span class="pre">transparency</span></code> ranges from 0 (totally transparent)
to 1 (totally opaque). A range of 0 to 1 is pretty common because it
makes it easy to talk about percentages, e.g. 0.73 is exactly 73% of
the way between 0 and 1.</p>
<p>We will also need a variable that tells us how much to change the
transparency on each call to <code class="docutils literal"><span class="pre">draw()</span></code>. In other words, we need a
variable that stores how fast the transparency change:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">float</span> <span class="n">dtrans</span><span class="o">;</span>
</pre></div>
</div>
<p>We call this variable <code class="docutils literal"><span class="pre">dtrans</span></code> following the convention of starting
&#8220;speed&#8221; variables (like <code class="docutils literal"><span class="pre">dx</span></code> and <code class="docutils literal"><span class="pre">dy</span></code>) with the letter <code class="docutils literal"><span class="pre">d</span></code>.</p>
<p>Now we can add the fading effect. We need to make only a few changes:</p>
<ul>
<li><p class="first">Whenever the user clicks the mouse, the circle is drawn at a new
location with a totally opaque transparency. Thus we need to set
<code class="docutils literal"><span class="pre">transparency</span></code> to 1 at the end of <code class="docutils literal"><span class="pre">mouseClick()</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">mousePressed</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">mouseX</span><span class="o">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">mouseY</span><span class="o">;</span>
  <span class="n">transparency</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Whenever the circle is drawn, its fill color must be drawn taking
the transparency into account. This is not completely
straightforward. For instance, this <em>doesn&#8217;t</em> work:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>
  <span class="n">noStroke</span><span class="o">();</span>

  <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="n">transparency</span><span class="o">);</span>  <span class="c1">// wrong!</span>

  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">150</span><span class="o">,</span> <span class="mi">150</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The problem is that the <code class="docutils literal"><span class="pre">fill</span></code> function expects a value in the range 0 to
255 (you learn this by reading the <a class="reference external" href="http://processing.org/reference/fill_.html">fill() function documentation</a>). But <code class="docutils literal"><span class="pre">transparency</span></code> ranges
from 0 to 1.</p>
<p>We could, of course, change our previous decision and let <code class="docutils literal"><span class="pre">transparency</span></code>
range from 0 to 255. That would be fine for this one program. But in
general, that&#8217;s probably a bad idea. In large programs, you may have many
different ranges, and if these ranges all have different begin and end
points you will soon find it takes a lot off mental effort to keep track of
them. It&#8217;s simpler and more consistent if you require that all ranges start
at 0 and end at 1.</p>
<p>So lets keep the range of <code class="docutils literal"><span class="pre">transparency</span></code> as it is, and instead use the
<code class="docutils literal"><span class="pre">map</span></code> function to convert <code class="docutils literal"><span class="pre">transparency</span></code> into a corresponding value in
the range 0 to 255:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>
  <span class="n">noStroke</span><span class="o">();</span>

  <span class="kt">float</span> <span class="n">a</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">transparency</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">);</span>
  <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="n">a</span><span class="o">);</span>

  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">150</span><span class="o">,</span> <span class="mi">150</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This works! The expression <code class="docutils literal"><span class="pre">map(transparency,</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">255)</span></code> returns the a
number in the range 0 to 255 that corresponds to the same value of
<code class="docutils literal"><span class="pre">transparency</span></code> from 0 to 1.</p>
</li>
<li><p class="first">After the circle is drawn, we need to change <code class="docutils literal"><span class="pre">transparency</span></code> by
adding <code class="docutils literal"><span class="pre">dtrans</span></code> to it:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>
  <span class="n">noStroke</span><span class="o">();</span>

  <span class="kt">float</span> <span class="n">a</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">transparency</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">);</span>
  <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="n">a</span><span class="o">);</span>

  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">150</span><span class="o">,</span> <span class="mi">150</span><span class="o">);</span>

  <span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Since we&#8217;ve decided to add <code class="docutils literal"><span class="pre">dtrans</span></code> to <code class="docutils literal"><span class="pre">transparency</span></code> (instead of
subtracting it), we must remember to initialize <code class="docutils literal"><span class="pre">dtrans</span></code> to a <em>negative</em>
value in order to get a fading effect.</p>
</li>
</ul>
<p>This works! Wherever you click on the window a circle appears and then slowly
fades to away.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>There&#8217;s a bug in this program that doesn&#8217;t matter much in this simple demo,
but could cause problems in larger programs that use the same idea. The
problem is that <code class="docutils literal"><span class="pre">transparency</span></code> quickly becomes negative, which means it
is outside of the valid range 0 to 1. That causes no problem here, but in
other situations it might. So to ensure that <code class="docutils literal"><span class="pre">transparency</span></code> is always in
the valid range, we can modify the code by adding a new statement:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>
<span class="n">transparency</span> <span class="o">=</span> <span class="n">constrain</span><span class="o">(</span><span class="n">transparency</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
</pre></div>
</div>
<p>The statement <code class="docutils literal"><span class="pre">transparency</span> <span class="pre">=</span> <span class="pre">constrain(transparency,</span> <span class="pre">0,</span> <span class="pre">1)</span></code> limits the
value of <code class="docutils literal"><span class="pre">transparency</span></code> to be between 0 and 1. It is the same as writing this
if-statement:</p>
<div class="last highlight-java"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transparency</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">transparency</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="fading-in-and-fading-out">
<h2>Fading in and Fading Out<a class="headerlink" href="#fading-in-and-fading-out" title="Permalink to this headline">¶</a></h2>
<p>Now lets change the program so that after the circle becomes invisible, it
starts to fade back in at the same rate that it faded out. The trick here is
to use if-statements to check when the circle is totally invisible/opaque and
then reverse the direction of the fading:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>

  <span class="c1">// ...</span>

  <span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>We could also have written the if-statement like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>

  <span class="c1">// ...</span>

  <span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Or even this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>

  <span class="c1">// ...</span>

  <span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">transparency</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>For this particular program all three ways of writing the if-statement are
practically equivalent, and so it does not matter too much which one you use.
But, in general, writing if-statements in different forms can lead to
significantly different code.</p>
<p>The statement <code class="docutils literal"><span class="pre">dtran</span> <span class="pre">=</span> <span class="pre">-dtrans</span></code> causes the &#8220;direction&#8221; of the fading to
change by flipping the sign of <code class="docutils literal"><span class="pre">dtrans</span></code>, i.e. when <code class="docutils literal"><span class="pre">dtrans</span></code> is negative it
becomes positive (fading in), and when it is positive it becomes negative
(fading out).</p>
</div>
<div class="section" id="bouncing-and-fading">
<h2>Bouncing and Fading<a class="headerlink" href="#bouncing-and-fading" title="Permalink to this headline">¶</a></h2>
<p>Finally, lets make the circle bounce around the screen while fading. We&#8217;ve
seen in previous notes how to make a ball bounce, and so we need to add the
same sort of code here. In particular, to make the circle move we&#8217;ll use
<code class="docutils literal"><span class="pre">dx</span></code> and <code class="docutils literal"><span class="pre">dy</span></code> to represent the velocity, and then add some if-statements
that test for edge collisions. See the code at the end of these notes for the
final program.</p>
</div>
<div class="section" id="questions">
<h2>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>What are alpha values?</li>
<li>What is the range of alpha values in a <a class="reference external" href="http://processing.org/">Processing</a> color function
such as <code class="docutils literal"><span class="pre">fill</span></code>?</li>
<li>When is <code class="docutils literal"><span class="pre">mousePressed()</span></code> called?</li>
<li>Why does the variable <code class="docutils literal"><span class="pre">transparency</span></code> range from 0 to 1?</li>
<li>Why is <code class="docutils literal"><span class="pre">dtrans</span></code> set to a <em>negative</em> value in the fading circle
program?</li>
</ol>
</div>
<div class="section" id="programming-questions">
<h2>Programming Questions<a class="headerlink" href="#programming-questions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Add a background image to the <a class="reference internal" href="#fading-circle-prog-label"><span>fading circle program</span></a>. As the circle fades away, the
underlying image should become clearer.</li>
<li>Modify the <a class="reference internal" href="#fading-circle-prog-label"><span>fading circle program</span></a>
so the circle <em>fades in</em> (instead of fades out). When the user
clicks with the mouse, the circle begins invisible and then slowly
becomes fully opaque.</li>
<li>Read about <a class="reference external" href="http://processing.org/reference/tint_.html">the tint() function</a> and then modify the
fading circle program to make an arbitrary image (loaded from a
file) fade away.</li>
</ol>
</div>
<div class="section" id="the-fading-circle-program">
<h2>The Fading Circle Program<a class="headerlink" href="#the-fading-circle-program" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java" id="fading-circle-prog-label"><div class="highlight"><pre><span class="kt">float</span> <span class="n">x</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">y</span><span class="o">;</span>

<span class="kt">float</span> <span class="n">transparency</span><span class="o">;</span> <span class="c1">// 0 &lt;= transparency &lt;= 1</span>
<span class="kt">float</span> <span class="n">dtrans</span><span class="o">;</span>       <span class="c1">// the change in transparency on each call to draw</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>
  <span class="n">smooth</span><span class="o">();</span>

  <span class="n">transparency</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.01</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>

  <span class="n">noStroke</span><span class="o">();</span>
  <span class="kt">float</span> <span class="n">a</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">transparency</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">);</span>
  <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="n">a</span><span class="o">);</span>
  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">150</span><span class="o">,</span> <span class="mi">150</span><span class="o">);</span>

  <span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">mousePressed</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">mouseX</span><span class="o">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">mouseY</span><span class="o">;</span>
  <span class="n">transparency</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-pulsing-circle-program">
<h2>The Pulsing Circle Program<a class="headerlink" href="#the-pulsing-circle-program" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java" id="pulsing-circle-prog-label"><div class="highlight"><pre><span class="kt">float</span> <span class="n">x</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">y</span><span class="o">;</span>

<span class="kt">float</span> <span class="n">transparency</span><span class="o">;</span> <span class="c1">// 0 &lt;= transparency &lt;= 1</span>
<span class="kt">float</span> <span class="n">dtrans</span><span class="o">;</span>       <span class="c1">// the change in transparency on each call to draw</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>
  <span class="n">smooth</span><span class="o">();</span>

  <span class="n">transparency</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.01</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>

  <span class="n">noStroke</span><span class="o">();</span>
  <span class="kt">float</span> <span class="n">a</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">transparency</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">);</span>
  <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="n">a</span><span class="o">);</span>
  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">150</span><span class="o">,</span> <span class="mi">150</span><span class="o">);</span>

  <span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">mousePressed</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">mouseX</span><span class="o">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">mouseY</span><span class="o">;</span>
  <span class="n">transparency</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-bouncing-and-pulsing-circle-program">
<h2>The Bouncing and Pulsing Circle Program<a class="headerlink" href="#the-bouncing-and-pulsing-circle-program" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java" id="bouncing-pulsing-circle-prog-label"><div class="highlight"><pre><span class="kt">float</span> <span class="n">x</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">y</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">dx</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">dy</span><span class="o">;</span>


<span class="kt">float</span> <span class="n">transparency</span><span class="o">;</span> <span class="c1">// 0 &lt;= transparency &lt;= 1</span>
<span class="kt">float</span> <span class="n">dtrans</span><span class="o">;</span>       <span class="c1">// the change in transparency on each call to draw</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>
  <span class="n">smooth</span><span class="o">();</span>

  <span class="n">x</span> <span class="o">=</span> <span class="mi">250</span><span class="o">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="mi">250</span><span class="o">;</span>
  <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.5</span><span class="o">;</span>
  <span class="n">dy</span> <span class="o">=</span> <span class="mf">2.2</span><span class="o">;</span>

  <span class="n">transparency</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.01</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>

  <span class="n">noStroke</span><span class="o">();</span>
  <span class="kt">float</span> <span class="n">a</span> <span class="o">=</span> <span class="n">map</span><span class="o">(</span><span class="n">transparency</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">);</span>
  <span class="n">fill</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="n">a</span><span class="o">);</span>
  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">150</span><span class="o">,</span> <span class="mi">150</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
  <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">75</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// hit left edge?</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">75</span><span class="o">;</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">75</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// hit right edge?</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">499</span> <span class="o">-</span> <span class="mi">75</span><span class="o">;</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="mi">75</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// hit top edge?</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">75</span><span class="o">;</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">75</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// hit bottom edge?</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">499</span> <span class="o">-</span> <span class="mi">75</span><span class="o">;</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="n">transparency</span> <span class="o">+=</span> <span class="n">dtrans</span><span class="o">;</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">transparency</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtrans</span> <span class="o">=</span> <span class="o">-</span><span class="n">dtrans</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">mousePressed</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="n">mouseX</span><span class="o">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">mouseY</span><span class="o">;</span>
  <span class="n">transparency</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ball_throw.html" title="Special Effect: Throwing a Ball"
             >next</a> |</li>
        <li class="right" >
          <a href="bouncing_ball.html" title="Example: A Bouncing Ball"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Toby Donaldson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>