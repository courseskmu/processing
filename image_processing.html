<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introduction to Image Processing &mdash; CMPT 166 Fall 2016 1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CMPT 166 Fall 2016 1 documentation" href="index.html" />
    <link rel="next" title="(Extra) A Simple Sprite Class" href="simple_sprite.html" />
    <link rel="prev" title="(Extra) Animated Sprites" href="animated_sprites.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="simple_sprite.html" title="(Extra) A Simple Sprite Class"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="animated_sprites.html" title="(Extra) Animated Sprites"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction to Image Processing</a><ul>
<li><a class="reference internal" href="#displaying-an-image">Displaying an Image</a></li>
<li><a class="reference internal" href="#playing-with-tint">Playing with tint</a></li>
<li><a class="reference internal" href="#how-to-access-image-pixels-in-processing">How to Access Image Pixels in Processing</a></li>
<li><a class="reference internal" href="#processing-every-pixel-of-an-image">Processing Every Pixel of an Image</a></li>
<li><a class="reference internal" href="#alternate-program">Alternate Program</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="animated_sprites.html"
                        title="previous chapter">(Extra) Animated Sprites</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="simple_sprite.html"
                        title="next chapter">(Extra) A Simple Sprite Class</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction-to-image-processing">
<h1>Introduction to Image Processing<a class="headerlink" href="#introduction-to-image-processing" title="Permalink to this headline">¶</a></h1>
<p>Image processing is a large and important topic that is all about using
computers to process and manipulate images. Here are just a few of the
problems that image processing deals with:</p>
<ul class="simple">
<li>Converting a color image to black and white or grayscale. For example,
newspapers that printed in black and white must convert color images to
black and white.</li>
<li>Applying special effects to images, such as sharpening, blurring,
scaling, etc.</li>
<li>Removing &#8220;noise&#8221; from images. For example, little &#8220;specks&#8221; and
visual imperfections occasionally appear in pictures, and it is
often possible to automatically remove them.</li>
<li>Recognizing image features, such as faces or text. For instance,
many digital cameras have facial recognition software that puts a
box around faces.</li>
<li>Efficiently compressing images into small files so that they can be more
easily processed. This is especially important in video begin sent over a
network, where you might have to send <em>dozens</em> of individual pictures (i.e.
frames of the video) a second.</li>
</ul>
<p>Image processing applications can be computationally intensive because
typically every pixel of an image must be processed. For example, a 640x400
pixel image has 256,000 pixels, and if you wanted to, say, convert each pixel
to black and white, then you must change all 256,000 pixels. If you are
processing an image in real time (e.g. the output of a webcam), then things
are even tougher because you might have to process, say, 24 images per
<em>second</em> (which amounts to changing more then 6 million pixels each second).
Clearly, speed is important in real-time image processing.</p>
<p>In these notes we&#8217;ll see a few simple yet useful applications of image
processing in <a class="reference external" href="http://processing.org/">Processing</a>. We&#8217;ll use this image:</p>
<blockquote>
<div><a class="reference internal image-reference" href="_images/kids.jpg"><img alt="A colorful picture of kids." class="align-center" src="_images/kids.jpg" style="width: 324.0px; height: 216.5px;" /></a>
</div></blockquote>
<p>These notes are in part based on <a class="reference external" href="http://processing.org/learning/pixels/">Intro to Image Processing</a> notes on the <a class="reference external" href="http://processing.org/">Processing</a> website.</p>
<div class="section" id="displaying-an-image">
<h2>Displaying an Image<a class="headerlink" href="#displaying-an-image" title="Permalink to this headline">¶</a></h2>
<p>First, lets see how to display a single image:</p>
<div class="highlight-python"><div class="highlight"><pre>PImage img;

void setup() {
  img = loadImage(&quot;kids.jpg&quot;);
  size(img.width, img.height);
}

void draw() {
  background(0);

  image(img, 0, 0);
}
</pre></div>
</div>
<p>Recall that images are placed according to their upper-left corner.</p>
</div>
<div class="section" id="playing-with-tint">
<h2>Playing with tint<a class="headerlink" href="#playing-with-tint" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to process an entire image in processing is to use the
<code class="docutils literal"><span class="pre">tint</span></code> function:</p>
<div class="highlight-python"><div class="highlight"><pre>PImage img;

void setup() {
  img = loadImage(&quot;kids.jpg&quot;);
  size(img.width, img.height);
}

void draw() {
  background(0);

  float g = map(mouseY, 0, 500, 0, 255);
  tint(g);
  image(img, 0, 0);
}
</pre></div>
</div>
<p>Here we pass one number, <code class="docutils literal"><span class="pre">g</span></code>, to <code class="docutils literal"><span class="pre">tint</span></code> that controls the image&#8217;s
brightness. If you pass in a second value, you can control the transparency:</p>
<div class="highlight-python"><div class="highlight"><pre>PImage img;
PImage bg;

void setup() {
  img = loadImage(&quot;kids.jpg&quot;);
  bg = loadImage(&quot;bg.jpg&quot;);

  size(bg.width, bg.height);
}

void draw() {
  background(bg);

  float g = map(mouseY, 0, 500, 0, 255);
  tint(255, g);
  image(img, 0, 0);
}
</pre></div>
</div>
<p>By passing in three parameters, you can control the amount of red, green, and
blue for each pixel:</p>
<div class="highlight-python"><div class="highlight"><pre>PImage img;

void setup() {
  img = loadImage(&quot;kids.jpg&quot;);
  size(img.width, img.height);
}

void draw() {
  tint(255, 0, 0);        // just red
  //tint(0, 255, 0);      // just green
  //tint(0, 0, 255);      // just blue
  //tint(100, 10, 230);   // a little bit of red, a tiny bit of
                          // green, and a lot of blue
  image(img, 0, 0);
}
</pre></div>
</div>
</div>
<div class="section" id="how-to-access-image-pixels-in-processing">
<h2>How to Access Image Pixels in Processing<a class="headerlink" href="#how-to-access-image-pixels-in-processing" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">tint</span></code> function is useful, but many image processing algorithms need to
work at the <a class="reference internal" href="glossary.html#term-pixel"><span class="xref std std-term">pixel</span></a> level. That is, they need to scan through an image
one pixel at a time, changing the pixels as they go.</p>
<p>For example, one way to convert a color image to black and white is to look at
every pixel and change it to white if it is bright enough, and to black
otherwise.</p>
<p>Every <code class="docutils literal"><span class="pre">PImage</span></code> object contains an <em>array</em> of pixels that you can access. An
array is like an <code class="docutils literal"><span class="pre">ArrayList</span></code>, but simpler and with more compact notation for
accessing its elements.</p>
<p>For example, suppose you have a tiny 3x3 image that we&#8217;ll call <code class="docutils literal"><span class="pre">img</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>a b c
d e f
g h i
</pre></div>
</div>
<p>This little image contains exactly 9 pixel. The pixels are stored in an array
like this:</p>
<div class="highlight-python"><div class="highlight"><pre>             0   1   2   3   4   5   6   7    8
            --- --- --- --- --- --- --- --- ---
img.pixels | a | b | c | d | e | f | g | h | i |
            --- --- --- --- --- --- --- --- ---
</pre></div>
</div>
<p>The individuals pixels are accessed using square-bracket notation, e.g.
<code class="docutils literal"><span class="pre">img.pixels[0]</span></code> is pixel <code class="docutils literal"><span class="pre">a</span></code>, <code class="docutils literal"><span class="pre">img.pixels[1]</span></code> is pixel <code class="docutils literal"><span class="pre">b</span></code>, and so on.</p>
<p>To use <code class="docutils literal"><span class="pre">img.pixels</span></code> in your programs you must call <code class="docutils literal"><span class="pre">loadPixels</span></code> and
<code class="docutils literal"><span class="pre">updatePixels</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>img.loadPixels();

// ... code that processes img.pixels

img.updatePixels();
</pre></div>
</div>
<p>For example, this code converts a color image to grayscale:</p>
<div class="highlight-python"><div class="highlight"><pre>img.loadPixels();

int i = 0;
while (i &lt; img.pixels.length) {
  color c = img.pixels[i];
  float r = red(c);
  float g = green(c);
  float b = blue(c);

  float gray = (r + g + b) / 3;
  img.pixels[i] = color(gray);  // set the pixel to a shade of gray
                                // proportional to the brightness
                                // of the color
  ++i;
}

img.updatePixels();
</pre></div>
</div>
<p>The resulting image now consists of 256 different shades of gray, and so is
ready to be printed on a black-and-white printer.</p>
</div>
<div class="section" id="processing-every-pixel-of-an-image">
<h2>Processing Every Pixel of an Image<a class="headerlink" href="#processing-every-pixel-of-an-image" title="Permalink to this headline">¶</a></h2>
<p>Here&#8217;s a complete program that is useful for experimenting with pixel-
processing:</p>
<div class="highlight-python"><div class="highlight"><pre>PImage img;

void setup() {
  img = loadImage(&quot;kids.jpg&quot;);
  size(img.width, img.height);
  println(img.width * img.height + &quot; pixels&quot;);
}

void draw() {
  image(img, 0, 0);
}

void mousePressed() {
  println(&quot;mouse pressed&quot;);
  img.loadPixels();
  int i = 0;
  while (i &lt; img.pixels.length) {
    color c = img.pixels[i];
    float r = red(c);
    float g = green(c);
    float b = blue(c);

    // the code below is the only code you should change

    float gray = (r + g + b) / 3;
    img.pixels[i] = color(gray);  // set the pixel&#39;s new color

    // end of code to change

    ++i;
  }
  img.updatePixels();
}
</pre></div>
</div>
<p>As it stands, the program converts <code class="docutils literal"><span class="pre">img</span></code> to grayscale when you click the
mouse. Here are a few other ideas:</p>
<ul>
<li><p class="first">Show only a single color component of each pixel, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">img</span><span class="o">.</span><span class="n">pixels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">Re-arrange the color components, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">img</span><span class="o">.</span><span class="n">pixels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">r</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">&#8220;Invert&#8221; the components, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">img</span><span class="o">.</span><span class="n">pixels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span><span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">g</span><span class="p">,</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">b</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">Make pure black and white, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>float br = (r + g + b) / 3.0;  // approximate brightness
if (br &lt; 128) {
  img.pixels[i] = color(0);
} else {
  img.pixels[i] = color(255);
}
</pre></div>
</div>
<p>You can use colors other than black and white if you like, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>float br = (r + g + b) / 3.0;  // approximate brightness
if (br &lt; 128) {
  img.pixels[i] = color(255, 255, 0);
} else {
  img.pixels[i] = color(244, 238, 224);
}
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="alternate-program">
<h2>Alternate Program<a class="headerlink" href="#alternate-program" title="Permalink to this headline">¶</a></h2>
<p>The following is alternative to the image-processing program above with these
added features:</p>
<ul class="simple">
<li>Clicking the left mouse-button flips back and forth between the original image and the
processed image.</li>
<li>While in the processed image, moving the mouse pointer will cause the image to be
immediately re-drawn. Thus and processing that takes into account, say, the position
of the mouse pointer (e.g. the <code class="docutils literal"><span class="pre">blackAndWhite</span></code> function) will be re-processed immediately.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>PImage img;  // the image to display
PImage orig; // the original image
PImage proc; // the processed image

boolean showProcessed;

void setup() {
  // load the original image
  orig = loadImage(&quot;kids.jpg&quot;);

  // make a blank image the same size ad the original
  proc = createImage(orig.width, orig.height, RGB);

  // show the unprocessed image initially
  img = orig;
  showProcessed = false;

  // set the window to be the exact size of the image
  size(img.width, img.height);

  println(img.width + &quot; x &quot; + img.height + &quot; = &quot;
        + img.width * img.height + &quot; pixels&quot;);
}

void draw() {
  image(img, 0, 0);
}

void mouseMoved() {
  if (showProcessed) {
    println(mouseY);
    processImage();
    img = proc;
  }
}

void mousePressed() {
  showProcessed = !showProcessed;

  if (showProcessed) {
    processImage();
    img = proc;
  }
  else {
    img = orig;
  }
}

void processImage() {
  proc.loadPixels();
  int i = 0;  // for half image use: proc.pixels.length / 2
  while (i &lt; orig.pixels.length) {
      color c = orig.pixels[i];
      proc.pixels[i] = blackAndWhite(c);
      ++i;
  }
  proc.updatePixels();
}

color grayscale(color c) {
    float r = red(c);
    float g = green(c);
    float b = blue(c);

    float brightness = (r + g + b) / 3;

    return color(brightness);
}

color blackAndWhite(color c) {
    float r = red(c);
    float g = green(c);
    float b = blue(c);

    float brightness = (r + g + b) / 3;

    // set the threshold to be proportional to mouseY
    float pct = map(mouseY, 0, height, 0.0, 1.0);
    float threshold = 255 * pct;

    if (brightness &lt; threshold) {
      return color(0);
    } else {
      return color(255);
    }
}
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="simple_sprite.html" title="(Extra) A Simple Sprite Class"
             >next</a> |</li>
        <li class="right" >
          <a href="animated_sprites.html" title="(Extra) Animated Sprites"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Toby Donaldson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>