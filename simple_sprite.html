<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>(Extra) A Simple Sprite Class &mdash; CMPT 166 Fall 2016 1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CMPT 166 Fall 2016 1 documentation" href="index.html" />
    <link rel="next" title="Top 10 Processing Features Not Covered" href="features_not_covered.html" />
    <link rel="prev" title="Introduction to Image Processing" href="image_processing.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="features_not_covered.html" title="Top 10 Processing Features Not Covered"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="image_processing.html" title="Introduction to Image Processing"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">(Extra) A Simple Sprite Class</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#a-sprite-class">A Sprite Class</a></li>
<li><a class="reference internal" href="#using-sprite">Using Sprite</a></li>
<li><a class="reference internal" href="#making-it-bounce">Making it Bounce</a></li>
<li><a class="reference internal" href="#showing-the-bounding-box">Showing the Bounding Box</a></li>
<li><a class="reference internal" href="#hit-detection">Hit Detection</a></li>
<li><a class="reference internal" href="#rotating-around-the-center">Rotating Around the Center</a></li>
<li><a class="reference internal" href="#one-more-constructor">One More Constructor</a></li>
<li><a class="reference internal" href="#programming-questions">Programming Questions</a></li>
<li><a class="reference internal" href="#the-complete-sprite-class">The Complete Sprite Class</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="image_processing.html"
                        title="previous chapter">Introduction to Image Processing</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="features_not_covered.html"
                        title="next chapter">Top 10 Processing Features Not Covered</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="extra-a-simple-sprite-class">
<h1>(Extra) A Simple Sprite Class<a class="headerlink" href="#extra-a-simple-sprite-class" title="Permalink to this headline">¶</a></h1>
<p>In these notes you will learn:</p>
<ul class="simple">
<li>What a sprite is, and why they are useful in animation.</li>
<li>How to write a simple yet generic sprite class.</li>
</ul>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>You may have noticed a pattern in the classes we&#8217;ve created for
animated objects. They all start out like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">MyCoolAnimatedThing</span> <span class="o">{</span>
   <span class="kt">float</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>    <span class="c1">// position</span>
   <span class="kt">float</span> <span class="n">dx</span><span class="o">,</span> <span class="n">dy</span><span class="o">;</span>  <span class="c1">// velocity</span>

   <span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
      <span class="c1">// ... drawing code ..</span>
   <span class="o">}</span>

   <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
     <span class="c1">// ... updating code</span>
   <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>What we will do in this note is create a general-purpose class called
<code class="docutils literal"><span class="pre">Sprite</span></code> that contains these basic features. This will make it easy to
create animated objects like those we&#8217;ve been making in this course.</p>
<p>In computer animation, a <a class="reference internal" href="glossary.html#term-sprite"><span class="xref std std-term">sprite</span></a> is any animated object. Typically, a
sprite consists of one or more pre-made images. Here we&#8217;ll create a simple yet
useful class for single-image sprites.</p>
</div>
<div class="section" id="a-sprite-class">
<h2>A Sprite Class<a class="headerlink" href="#a-sprite-class" title="Permalink to this headline">¶</a></h2>
<p>We want to write a class called <code class="docutils literal"><span class="pre">Sprite</span></code> that represents animated
objects:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>

   <span class="c1">// ...</span>

<span class="o">}</span> <span class="c1">// class Sprite</span>
</pre></div>
</div>
<p>What should go in this class? For concreteness, lets use a bouncing
image as the model to follow. To get an image to bounce around the
screen, we need a few things:</p>
<ul class="simple">
<li>An image. <a class="reference external" href="http://processing.org/">Processing</a> uses the <code class="docutils literal"><span class="pre">PImage</span></code> class to store and
manipulate images, and the <code class="docutils literal"><span class="pre">loadImage</span></code> function to read them from
disk.</li>
<li>The position of the image on the screen. Recall that in <a class="reference external" href="http://processing.org/">Processing</a>,
images are placed by specifying the location of their upper-left
corner.</li>
<li>The velocity of the image.</li>
<li>Whether or not the image is visible.</li>
</ul>
<p>So lets add variables for each of these pieces of information:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="n">PImage</span> <span class="n">img</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">dx</span><span class="o">,</span> <span class="n">dy</span><span class="o">;</span>
  <span class="kt">boolean</span> <span class="n">visible</span><span class="o">;</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Next lets add a constructor:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="n">PImage</span> <span class="n">img</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">dx</span><span class="o">,</span> <span class="n">dy</span><span class="o">;</span>
  <span class="kt">boolean</span> <span class="n">visible</span><span class="o">;</span>

  <span class="n">Sprite</span><span class="o">(</span><span class="n">String</span> <span class="n">fname</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="n">fname</span><span class="o">);</span>
    <span class="n">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>  <span class="c1">// starts invisible</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The constructor requires the name of an image file. If the file does not
exist, then <code class="docutils literal"><span class="pre">loadImage</span></code> crashes the program. In other words, we can&#8217;t create
a <code class="docutils literal"><span class="pre">Sprite</span></code> unless we give it a valid image.</p>
<p>Next, lets add <code class="docutils literal"><span class="pre">render()</span></code> and <code class="docutils literal"><span class="pre">update()</span></code> functions. Lets not yet worry
about the ball bouncing off walls yet:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>

  <span class="c1">// ...</span>

  <span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">visible</span><span class="o">)</span> <span class="n">image</span><span class="o">(</span><span class="n">img</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">render()</span></code> function draws the image on screen at (<code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>). If
<code class="docutils literal"><span class="pre">visible</span></code> is <code class="docutils literal"><span class="pre">false</span></code>, then nothing is drawn. The <code class="docutils literal"><span class="pre">update()</span></code> function is
also quite straightforward, adding the velocity to the current position.</p>
<p>Here is the complete class:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="n">PImage</span> <span class="n">img</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">dx</span><span class="o">,</span> <span class="n">dy</span><span class="o">;</span>
  <span class="kt">boolean</span> <span class="n">visible</span><span class="o">;</span>

  <span class="n">Sprite</span><span class="o">(</span><span class="n">String</span> <span class="n">fname</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="n">fname</span><span class="o">);</span>
    <span class="n">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>  <span class="c1">// starts invisible</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">visible</span><span class="o">)</span> <span class="n">image</span><span class="o">(</span><span class="n">img</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="c1">// class Sprite</span>
</pre></div>
</div>
</div>
<div class="section" id="using-sprite">
<h2>Using Sprite<a class="headerlink" href="#using-sprite" title="Permalink to this headline">¶</a></h2>
<p>Here&#8217;s how you can use <code class="docutils literal"><span class="pre">Sprite</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Sprite</span> <span class="n">s</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sprite</span><span class="o">(</span><span class="s">&quot;burger.gif&quot;</span><span class="o">);</span>
  <span class="n">s</span><span class="o">.</span><span class="na">dx</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">dy</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>

  <span class="n">s</span><span class="o">.</span><span class="na">render</span><span class="o">();</span>
  <span class="n">s</span><span class="o">.</span><span class="na">update</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">setup()</span></code> function creates a <code class="docutils literal"><span class="pre">Sprite</span></code> object based on the image file
<a class="reference download internal" href="_downloads/burger.gif" download=""><code class="xref download docutils literal"><span class="pre">burger.gif</span></code></a> (which contains a small cartoon
hamburger). It sets the position of the sprite to be the upper-left corner of
the screen, and then sets the velocity so that the burger moves diagonally
towards the bottom right. Finally, we set <code class="docutils literal"><span class="pre">visible</span></code> to true so that
something will actually be drawn on the screen.</p>
</div>
<div class="section" id="making-it-bounce">
<h2>Making it Bounce<a class="headerlink" href="#making-it-bounce" title="Permalink to this headline">¶</a></h2>
<p>Now lets make the image in our sprite bounce. We need to add edge-detection
code, but the question is where do we add it? One possibility is to put it in
the <code class="docutils literal"><span class="pre">update()</span></code> function of the <code class="docutils literal"><span class="pre">Sprite</span></code> class. But the problem with that
is that sometimes we may want a sprite that doesn&#8217;t bounce.</p>
<p>There are a number of ways of providing both bouncing and non-bouncing
sprites. The technique we&#8217;ll use here is to add a new <code class="docutils literal"><span class="pre">boolean</span></code> variable to
<code class="docutils literal"><span class="pre">Sprite</span></code> called <code class="docutils literal"><span class="pre">bouncing</span></code> that keeps track of whether or not the sprite
should bounce off the screen edges.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>One of the most common ways to solve this problem in an
object-oriented language like <a class="reference external" href="http://processing.org/">Processing</a> is to use
inheritance. Inheritance is essentially a technique that lets you
create a new class by basing it on an existing class. The new class
<em>inherits</em> all the variables and functions of the old one, plus you
can add new variables and functions, or even re-define existing
functions.</p>
<p class="last">Inheritance is a useful technique, but it introduces more technical details
than we have time to cover in this course.</p>
</div>
<p>Here is the modified <code class="docutils literal"><span class="pre">Sprite</span></code> class:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="n">PImage</span> <span class="n">img</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">dx</span><span class="o">,</span> <span class="n">dy</span><span class="o">;</span>
  <span class="kt">boolean</span> <span class="n">visible</span><span class="o">;</span>
  <span class="kt">boolean</span> <span class="n">bouncing</span><span class="o">;</span>

  <span class="n">Sprite</span><span class="o">(</span><span class="n">String</span> <span class="n">fname</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="n">fname</span><span class="o">);</span>
    <span class="n">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">bouncing</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">visible</span><span class="o">)</span> <span class="n">image</span><span class="o">(</span><span class="n">img</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">bouncing</span><span class="o">)</span> <span class="n">checkEdgeCollisions</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">checkEdgeCollisions</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">dy</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="c1">// hit the top edge?</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">height</span><span class="o">)</span> <span class="n">dy</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="c1">// hit the bottom edge?</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">dx</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="c1">// hit the left edge?</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">width</span><span class="o">)</span> <span class="n">dx</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="c1">// hit the right edge?</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The changes are:</p>
<ul>
<li><p class="first">The <code class="docutils literal"><span class="pre">boolean</span></code> variable <code class="docutils literal"><span class="pre">bouncing</span></code> has been added. It is
initially given the value <code class="docutils literal"><span class="pre">false</span></code>, meaning the sprite won&#8217;t
bounce.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">update</span></code> function has one new line:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
  <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">bouncing</span><span class="o">)</span> <span class="n">checkEdgeCollisions</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Every time <code class="docutils literal"><span class="pre">update</span></code> it is called it checks to see if the ball is
bouncing, and, if so, runs the edge collision detection code.</p>
</li>
<li><p class="first">The function <code class="docutils literal"><span class="pre">checkEdgeCollisions</span></code> has been added:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">checkEdgeCollisions</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>      <span class="c1">// hit the top edge?</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">height</span><span class="o">)</span> <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span> <span class="c1">// hit the bottom edge?</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>      <span class="c1">// hit the left edge?</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">width</span><span class="o">)</span> <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>  <span class="c1">// hit the right edge?</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The variables <code class="docutils literal"><span class="pre">width</span></code> and <code class="docutils literal"><span class="pre">height</span></code> are pre-defined <a class="reference external" href="http://processing.org/">Processing</a>
variables that return the width and height of the screen.</p>
</li>
</ul>
<p><a class="reference internal" href="oop_bouncing_ball.html"><em>We&#8217;ve seen the code for making balls bounce before</em></a>,
and so we only do the bare minimum here. You can improve it in a number of
ways.</p>
<p>To test this new code, you need only add one line to the previous test program
to turn bouncing on:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Sprite</span> <span class="n">s</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sprite</span><span class="o">(</span><span class="s">&quot;burger.gif&quot;</span><span class="o">);</span>
  <span class="n">s</span><span class="o">.</span><span class="na">dx</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">dy</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">bouncing</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>

  <span class="n">s</span><span class="o">.</span><span class="na">render</span><span class="o">();</span>
  <span class="n">s</span><span class="o">.</span><span class="na">update</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="showing-the-bounding-box">
<h2>Showing the Bounding Box<a class="headerlink" href="#showing-the-bounding-box" title="Permalink to this headline">¶</a></h2>
<p>It&#8217;s often useful to visually display a sprite&#8217;s bounding box, and so lets add
that as an option to <code class="docutils literal"><span class="pre">Sprite</span></code>. Similar to what we did to add bouncing, we
will use a boolean variable to keep track of whether or not the bounding box
should be displayed:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="c1">// ... same variables as before ...</span>
  <span class="kt">boolean</span> <span class="n">boundingBoxVisible</span><span class="o">;</span>

  <span class="n">Sprite</span><span class="o">(</span><span class="n">String</span> <span class="n">fname</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ... same as before ...</span>
    <span class="n">boundingBoxVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">visible</span><span class="o">)</span> <span class="n">image</span><span class="o">(</span><span class="n">img</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">boundingBoxVisible</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">pushStyle</span><span class="o">();</span>
      <span class="n">noFill</span><span class="o">();</span>
      <span class="n">stroke</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
      <span class="n">rect</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">img</span><span class="o">.</span><span class="na">width</span><span class="o">,</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>
      <span class="n">popStyle</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="c1">// ... same as before ...</span>
<span class="o">}</span> <span class="c1">// class Sprite</span>
</pre></div>
</div>
<p>We&#8217;ve used two new functions here, <code class="docutils literal"><span class="pre">pushStyle</span></code> and <code class="docutils literal"><span class="pre">popStyle</span></code>. The
<code class="docutils literal"><span class="pre">pushStyle</span></code> function saves the current style settings, e.g. the fill and
stroke settings. The <code class="docutils literal"><span class="pre">popStyle</span></code> function restores the style settings to be
the way they were to just <em>before</em> the <em>most recent</em> call to <code class="docutils literal"><span class="pre">pushStyle</span></code>.
Together, these two functions let us set the stroke and fill to be what we
want for the bounding box without over-writing any style settings that other
parts of the program may have set.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As you might guess by their names, <code class="docutils literal"><span class="pre">pushStyle</span></code> and
<code class="docutils literal"><span class="pre">popStyle</span></code> are similar to <code class="docutils literal"><span class="pre">pushMatrix</span></code> and <code class="docutils literal"><span class="pre">popMatrix</span></code>:
<code class="docutils literal"><span class="pre">pushMatrix</span></code> and <code class="docutils literal"><span class="pre">popMatrix</span></code> save and restore the coordinate
system settings, while <code class="docutils literal"><span class="pre">pushStyle</span></code> and <code class="docutils literal"><span class="pre">popStyle</span></code> save and
restore the style settings. Both pairs of functions are used
frequently in <a class="reference external" href="http://processing.org/">Processing</a> programs.</p>
</div>
<p>To turn on the sprite&#8217;s bounding box set <code class="docutils literal"><span class="pre">boundingBoxVisible</span></code> to
<code class="docutils literal"><span class="pre">true</span></code>, e.g.:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sprite</span><span class="o">(</span><span class="s">&quot;burger.gif&quot;</span><span class="o">);</span>
  <span class="n">s</span><span class="o">.</span><span class="na">dx</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">dy</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">bouncing</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">boundingBoxVisible</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="hit-detection">
<h2>Hit Detection<a class="headerlink" href="#hit-detection" title="Permalink to this headline">¶</a></h2>
<p>Lets add a function to <code class="docutils literal"><span class="pre">Sprite</span></code> that makes it easy to test if a given point
is inside the sprite&#8217;s bounding box:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="c1">// ...  same as before ...</span>

  <span class="c1">// Returns true when point (a, b) is inside this sprite&#39;s</span>
  <span class="c1">// bounding box, and false otherwise.</span>
  <span class="kt">boolean</span> <span class="nf">pointInBoundingBox</span><span class="o">(</span><span class="kt">float</span> <span class="n">a</span><span class="o">,</span> <span class="kt">float</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="na">width</span> <span class="o">&amp;&amp;</span>  <span class="n">b</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span><span class="o">)</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">else</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span> <span class="c1">// class Sprite</span>
</pre></div>
</div>
<p>This is essentially the same as the <code class="docutils literal"><span class="pre">pointInRect</span></code> function we saw in the
<a class="reference internal" href="hit_detection.html"><em>hit detection notes</em></a>, but it is more convenient to call
since it needs only two parameters.</p>
<p>We can use it like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Sprite</span> <span class="n">s</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sprite</span><span class="o">(</span><span class="s">&quot;burger.gif&quot;</span><span class="o">);</span>
  <span class="n">s</span><span class="o">.</span><span class="na">dx</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">dy</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">bouncing</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
  <span class="n">s</span><span class="o">.</span><span class="na">boundingBoxVisible</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>

  <span class="n">s</span><span class="o">.</span><span class="na">render</span><span class="o">();</span>
  <span class="n">s</span><span class="o">.</span><span class="na">update</span><span class="o">();</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">mousePressed</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">pointInBoundingBox</span><span class="o">(</span><span class="n">mouseX</span><span class="o">,</span> <span class="n">mouseY</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">&quot;burger hit!&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rotating-around-the-center">
<h2>Rotating Around the Center<a class="headerlink" href="#rotating-around-the-center" title="Permalink to this headline">¶</a></h2>
<p>Finally, lets add some code that allows the sprite to rotate around its center
point. We&#8217;ll need a variable to keep track of the objects angle, and another
variable to store the rate at which it is spinning:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="c1">// ... same as before ...</span>

  <span class="kt">float</span> <span class="n">angle</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">spinRate</span><span class="o">;</span>

  <span class="c1">// ... same as before ...</span>

  <span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">visible</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">pushMatrix</span><span class="o">();</span>

      <span class="c1">// move and rotate the coordinate system</span>
      <span class="n">translate</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span> <span class="o">/</span> <span class="mi">2</span><span class="o">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span> <span class="o">/</span> <span class="mi">2</span><span class="o">);</span>
      <span class="n">rotate</span><span class="o">(</span><span class="n">angle</span><span class="o">);</span>

      <span class="c1">// draw the image</span>
      <span class="n">image</span><span class="o">(</span><span class="n">img</span><span class="o">,</span> <span class="o">-</span><span class="n">img</span><span class="o">.</span><span class="na">width</span> <span class="o">/</span> <span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="n">img</span><span class="o">.</span><span class="na">height</span> <span class="o">/</span> <span class="mi">2</span><span class="o">);</span>

      <span class="n">popMatrix</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">boundingBoxVisible</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">pushStyle</span><span class="o">();</span>
      <span class="n">noFill</span><span class="o">();</span>
      <span class="n">stroke</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
      <span class="n">rect</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">img</span><span class="o">.</span><span class="na">width</span><span class="o">,</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>
      <span class="n">popStyle</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>
    <span class="n">angle</span> <span class="o">+=</span> <span class="n">spinRate</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">bouncing</span><span class="o">)</span> <span class="n">checkEdgeCollisions</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="c1">// ... same as before ...</span>

<span class="o">}</span> <span class="c1">// class Sprite</span>
</pre></div>
</div>
<p>Note a couple of things:</p>
<ul class="simple">
<li>Rotating requires moving the origin of the coordinate system where
we want the rotation to be centered, and then doing the
rotation. Since we are modifying the coordinate system, we need to
use <code class="docutils literal"><span class="pre">pushMatrix</span></code> and <code class="docutils literal"><span class="pre">popMatrix</span></code> to save and restore it to that
way it was before the rotation.</li>
<li>The bounding box does <em>not</em> get rotated in our <code class="docutils literal"><span class="pre">Sprite</span></code>
class. This is because the bounding box is used as the hit box, and
our hit detection function does not take angles into account (it
assumes the sides of the box are axis-aligned, i.e. parallel to the
x-axis and y-axis).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In practice, it would probably be more useful to allow the
use of the <code class="docutils literal"><span class="pre">Sprite</span></code> class to specify the point they want the
sprite to rotate around. However, to keep things simple our sprite
will always rotate around the center.</p>
</div>
</div>
<div class="section" id="one-more-constructor">
<h2>One More Constructor<a class="headerlink" href="#one-more-constructor" title="Permalink to this headline">¶</a></h2>
<p>Finally, lets add one more constructor to the <code class="docutils literal"><span class="pre">Sprite</span></code> class:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="c1">// ...</span>

  <span class="n">Sprite</span><span class="o">(</span><span class="n">PImage</span> <span class="n">init_img</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">init_img</span><span class="o">;</span>
    <span class="n">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">bouncing</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">boundingBoxVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="n">Sprite</span><span class="o">(</span><span class="n">String</span> <span class="n">fname</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="n">fname</span><span class="o">);</span>
    <span class="n">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">bouncing</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">boundingBoxVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>A class can have as many different constructors as it needs, so long as each
constructor takes different variables as input. Here, the new constructor
we&#8217;ve just added takes a <code class="docutils literal"><span class="pre">PImage</span></code> object called <code class="docutils literal"><span class="pre">init_img</span></code> as input. This
now lets us write code where multiple <code class="docutils literal"><span class="pre">Sprite</span></code> objects share the same image.
This is a very good thing: sharing images cuts down on the memory needed by
the program, and also shortens the time it takes to load images from disk.</p>
<p>Here&#8217;s a sample of how this new constructor is meant to be used:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Sprite</span><span class="o">&gt;</span> <span class="n">burgers</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
   <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

   <span class="n">burgers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Sprite</span><span class="o">&gt;();</span>
   <span class="n">PImage</span> <span class="n">img</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;burger.gif&quot;</span><span class="o">);</span>

   <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Sprite</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Sprite</span><span class="o">(</span><span class="n">img</span><span class="o">);</span>
      <span class="n">burgers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">s</span><span class="o">):</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This code creates an <code class="docutils literal"><span class="pre">ArrayList</span></code> of 100 sprites that all share the same
<code class="docutils literal"><span class="pre">PImage</span></code>. The file <code class="docutils literal"><span class="pre">burger.gif</span></code> is only loaded one time into memory.</p>
</div>
<div class="section" id="programming-questions">
<h2>Programming Questions<a class="headerlink" href="#programming-questions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Modify the edge-checking code in <code class="docutils literal"><span class="pre">checkEdgeCollisions</span></code> so that no
part of the sprite is ever drawn off the screen, no matter its
speed.</p>
</li>
<li><p class="first">Add a function called <code class="docutils literal"><span class="pre">setUpperLeftCorner(x,</span> <span class="pre">y)</span></code> that sets the upper-left
corner of a sprite&#8217;s image to be (<code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>):</p>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// cat is sprite that has already been defined</span>
<span class="n">cat</span><span class="o">.</span><span class="na">setUpperLeftCorner</span><span class="o">(</span><span class="mi">250</span><span class="o">,</span> <span class="mi">250</span><span class="o">);</span>
</pre></div>
</div>
</li>
<li><p class="first">Add a function called <code class="docutils literal"><span class="pre">setCenter(x,</span> <span class="pre">y)</span></code> that sets the center-point of a sprite&#8217;s
image to be (<code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>):</p>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// cat is sprite that has already been defined</span>
<span class="n">cat</span><span class="o">.</span><span class="na">setCenter</span><span class="o">(</span><span class="mi">250</span><span class="o">,</span> <span class="mi">250</span><span class="o">);</span>
</pre></div>
</div>
<p>Note that you <em>don&#8217;t</em> need to add any new variables to implement this function.</p>
</li>
<li><p class="first">Add a new <code class="docutils literal"><span class="pre">boolean</span></code> variable called <code class="docutils literal"><span class="pre">upperLeftVisible</span></code> that is initially
<code class="docutils literal"><span class="pre">false</span></code>. When it is set to <code class="docutils literal"><span class="pre">true</span></code>, a small (e.g.) red dot is drawn over the
upper-left corner of the sprite&#8217;s image.</p>
</li>
<li><p class="first">Add a new <code class="docutils literal"><span class="pre">boolean</span></code> variable called <code class="docutils literal"><span class="pre">centerVisible</span></code> that is initially
<code class="docutils literal"><span class="pre">false</span></code>. When it is set to <code class="docutils literal"><span class="pre">true</span></code>, a small (e.g.) red dot is drawn over the center
point of the sprite&#8217;s image.</p>
</li>
<li><p class="first">Add a new <code class="docutils literal"><span class="pre">boolean</span></code> variable called <code class="docutils literal"><span class="pre">followMouse</span></code> that is initially
<code class="docutils literal"><span class="pre">false</span></code>. When it is set to <code class="docutils literal"><span class="pre">true</span></code>, the sprite&#8217;s center point is drawn at
(<code class="docutils literal"><span class="pre">mouseX</span></code>, <code class="docutils literal"><span class="pre">mouseY</span></code>).</p>
</li>
</ol>
</div>
<div class="section" id="the-complete-sprite-class">
<h2>The Complete Sprite Class<a class="headerlink" href="#the-complete-sprite-class" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="n">PImage</span> <span class="n">img</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">dx</span><span class="o">,</span> <span class="n">dy</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">angle</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">spinRate</span><span class="o">;</span>

  <span class="kt">boolean</span> <span class="n">visible</span><span class="o">;</span>
  <span class="kt">boolean</span> <span class="n">bouncing</span><span class="o">;</span>
  <span class="kt">boolean</span> <span class="n">boundingBoxVisible</span><span class="o">;</span>

  <span class="n">Sprite</span><span class="o">(</span><span class="n">PImage</span> <span class="n">init_img</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">init_img</span><span class="o">;</span>
    <span class="n">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">bouncing</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">boundingBoxVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="n">Sprite</span><span class="o">(</span><span class="n">String</span> <span class="n">fname</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="n">fname</span><span class="o">);</span>
    <span class="n">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">bouncing</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="n">boundingBoxVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">visible</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">pushMatrix</span><span class="o">();</span>

      <span class="c1">// move and rotate the coordinate system</span>
      <span class="n">translate</span><span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span> <span class="o">/</span> <span class="mi">2</span><span class="o">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span> <span class="o">/</span> <span class="mi">2</span><span class="o">);</span>
      <span class="n">rotate</span><span class="o">(</span><span class="n">angle</span><span class="o">);</span>

      <span class="c1">// draw the image</span>
      <span class="n">image</span><span class="o">(</span><span class="n">img</span><span class="o">,</span> <span class="o">-</span><span class="n">img</span><span class="o">.</span><span class="na">width</span> <span class="o">/</span> <span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="n">img</span><span class="o">.</span><span class="na">height</span> <span class="o">/</span> <span class="mi">2</span><span class="o">);</span>

      <span class="n">popMatrix</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">boundingBoxVisible</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">pushStyle</span><span class="o">();</span>
      <span class="n">noFill</span><span class="o">();</span>
      <span class="n">stroke</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
      <span class="n">rect</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">img</span><span class="o">.</span><span class="na">width</span><span class="o">,</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>
      <span class="n">popStyle</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>
    <span class="n">angle</span> <span class="o">+=</span> <span class="n">spinRate</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">bouncing</span><span class="o">)</span> <span class="n">checkEdgeCollisions</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">checkEdgeCollisions</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>       <span class="c1">// hit the top edge?</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="n">height</span><span class="o">)</span> <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span> <span class="c1">// hit the bottom edge?</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>       <span class="c1">// hit the left edge?</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="n">width</span><span class="o">)</span> <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>  <span class="c1">// hit the right edge?</span>
  <span class="o">}</span>

  <span class="c1">// Returns true when point (a, b) is inside this sprite&#39;s</span>
  <span class="c1">// bounding box, and false otherwise.</span>
  <span class="kt">boolean</span> <span class="nf">pointInBoundingBox</span><span class="o">(</span><span class="kt">float</span> <span class="n">a</span><span class="o">,</span> <span class="kt">float</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="na">width</span> <span class="o">&amp;&amp;</span>  <span class="n">b</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="o">+</span> <span class="n">img</span><span class="o">.</span><span class="na">height</span><span class="o">)</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">else</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span> <span class="c1">// class Sprite</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="features_not_covered.html" title="Top 10 Processing Features Not Covered"
             >next</a> |</li>
        <li class="right" >
          <a href="image_processing.html" title="Introduction to Image Processing"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Toby Donaldson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>