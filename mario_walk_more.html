<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Multi-image Animation Using an ArrayList &mdash; CMPT 166 Fall 2016 1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CMPT 166 Fall 2016 1 documentation" href="index.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="Simple Multi-image Animation" href="mario_walk.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mario_walk.html" title="Simple Multi-image Animation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Multi-image Animation Using an ArrayList</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#using-an-arraylist">Using an ArrayList</a></li>
<li><a class="reference internal" href="#modifying-the-render-function">Modifying the render() Function</a></li>
<li><a class="reference internal" href="#using-more-images">Using More Images</a></li>
<li><a class="reference internal" href="#questions">Questions</a></li>
<li><a class="reference internal" href="#source-code">Source Code</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mario_walk.html"
                        title="previous chapter">Simple Multi-image Animation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="glossary.html"
                        title="next chapter">Glossary</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="multi-image-animation-using-an-arraylist">
<h1>Multi-image Animation Using an ArrayList<a class="headerlink" href="#multi-image-animation-using-an-arraylist" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>We saw in <a class="reference internal" href="mario_walk.html"><em>the previous note</em></a> how to use a state variable
and an if-else-if- statement to animate a multi-image sprite. It used only a
few images, and could not be modified to work with many different images
without a lot of tedious changes being made to the code.</p>
<p>So in this note we will modify the <code class="docutils literal"><span class="pre">Mario</span></code> class to work with any number of
imags. It will use an <code class="docutils literal"><span class="pre">ArrayList</span></code> to store its images instead of individual
variables. The basic idea of how the images are displayed one after the other
remains the same, but the implementation will change. The resulting code is a
little more complex, but it will let us make animations that work with any
number of images.</p>
</div>
<div class="section" id="using-an-arraylist">
<h2>Using an ArrayList<a class="headerlink" href="#using-an-arraylist" title="Permalink to this headline">¶</a></h2>
<p>In <a class="reference internal" href="mario_walk.html"><em>the first version of the Mario animation program</em></a>, we
used three images that were stored in global variables like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">PImage</span> <span class="n">img0</span><span class="o">;</span>
<span class="n">PImage</span> <span class="n">img1</span><span class="o">;</span>
<span class="n">PImage</span> <span class="n">img2</span><span class="o">;</span>

<span class="c1">// ...</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">img0</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk1.png&quot;</span><span class="o">);</span>
  <span class="n">img1</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk2.png&quot;</span><span class="o">);</span>
  <span class="n">img2</span> <span class="o">=</span> <span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk3.png&quot;</span><span class="o">);</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The problem with this is that if we have more than 3 images, we will need to
write many lines of nearly identical code. So lets replace this with an
<code class="docutils literal"><span class="pre">ArrayList</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">PImage</span><span class="o">&gt;</span> <span class="n">images</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">images</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">PImage</span><span class="o">&gt;();</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk1.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk2.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk3.png&quot;</span><span class="o">));</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Inside the <code class="docutils literal"><span class="pre">Mario</span></code> class, we also need replace references to <code class="docutils literal"><span class="pre">img0</span></code>,
<code class="docutils literal"><span class="pre">img1</span></code>, and <code class="docutils literal"><span class="pre">img2</span></code> with <code class="docutils literal"><span class="pre">images.get(0)</span></code>, <code class="docutils literal"><span class="pre">images.get(1)</span></code>, and
<code class="docutils literal"><span class="pre">images.get(2)</span></code>. For example:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">image</span><span class="o">(</span><span class="n">images</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">elapsedMillis</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">imgShowMillis</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">state</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
     <span class="n">timer</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>With these changes, the program runs as before. However, the code inside the
<code class="docutils literal"><span class="pre">Mario</span></code> <code class="docutils literal"><span class="pre">render()</span></code> function still assumes there are exactly three images.
So we need to modify that to work with any number of images.</p>
</div>
<div class="section" id="modifying-the-render-function">
<h2>Modifying the render() Function<a class="headerlink" href="#modifying-the-render-function" title="Permalink to this headline">¶</a></h2>
<p>Here is the current version of the <code class="docutils literal"><span class="pre">Mario</span></code> <code class="docutils literal"><span class="pre">render()</span></code> function. We want to
modify it so that it works with any number of images, not just 3:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">pushMatrix</span><span class="o">();</span>
  <span class="n">scale</span><span class="o">(</span><span class="n">size</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">image</span><span class="o">(</span><span class="n">images</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">elapsedMillis</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">imgShowMillis</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">state</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
       <span class="n">timer</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">image</span><span class="o">(</span><span class="n">images</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">elapsedMillis</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">imgShowMillis</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">state</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
       <span class="n">timer</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="o">==</span> <span class="mi">2</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">image</span><span class="o">(</span><span class="n">images</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">elapsedMillis</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">imgShowMillis</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
       <span class="n">timer</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="n">popMatrix</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Notice that when we call <code class="docutils literal"><span class="pre">images.get</span></code>, the image we want is always the same
as the value of <code class="docutils literal"><span class="pre">state</span></code>. This was intentional! What it means is that we
don&#8217;t actually need the if-statement. Instead, we replace all this code with
something that looks like this (although this is not quite right yet):</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">image</span><span class="o">(</span><span class="n">images</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">state</span><span class="o">),</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">elapsedMillis</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">imgShowMillis</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">state</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>  <span class="c1">// this statement is not quite right!</span>
   <span class="n">timer</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This almost works. The problem is the statement <code class="docutils literal"><span class="pre">state</span> <span class="pre">+=</span> <span class="pre">1</span></code> quite  correct.
When <code class="docutils literal"><span class="pre">i</span></code> is 3, we set <code class="docutils literal"><span class="pre">state</span></code> to 0, <em>not</em> 4. A simple way to fix this is
to add an if-statement that checks for this one case, i.e.:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">image</span><span class="o">(</span><span class="n">images</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">state</span><span class="o">),</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">elapsedMillis</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">imgShowMillis</span><span class="o">)</span> <span class="o">{</span>
   <span class="n">state</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>  <span class="c1">// not quite right!</span>
   <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>  <span class="c1">// fix state if necessary</span>
   <span class="n">timer</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This works! The program runs the same as before. But now the source code is
improved: we&#8217;ve replaced a large and repetitive if-else-if structure with a
much shorter piece of code that does the same thing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Another clever way to fix this problem is to write this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">state</span> <span class="o">=</span> <span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">%</span> <span class="mi">3</span><span class="o">;</span>
</pre></div>
</div>
<p>No extra if-statement is needed.</p>
<p>The expression <code class="docutils literal"><span class="pre">(i</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">%</span> <span class="pre">3</span></code> returns the <em>remainder</em> of dividing
<code class="docutils literal"><span class="pre">i</span> <span class="pre">+</span> <span class="pre">1</span></code> by 3. For example, if <code class="docutils literal"><span class="pre">i</span></code> is 2, then <code class="docutils literal"><span class="pre">(i</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">%</span> <span class="pre">3</span></code> is
the same as <code class="docutils literal"><span class="pre">3</span> <span class="pre">%</span> <span class="pre">3</span></code> which is 0. The expression <code class="docutils literal"><span class="pre">3</span> <span class="pre">%</span> <span class="pre">3</span></code> returns
the remainder of dividing 3 into 3. The remainder is 0, because 3
goes into 3 one time, with 0 left over.</p>
<p class="last"><code class="docutils literal"><span class="pre">%</span></code> is called the <strong>remainder</strong>, or <strong>mod</strong> (short for
<strong>modulus</strong>) operator.</p>
</div>
<p>One more change is needed to make the class work with any number of images.
The statement <code class="docutils literal"><span class="pre">if</span> <span class="pre">(state</span> <span class="pre">==</span> <span class="pre">3)</span> <span class="pre">state</span> <span class="pre">=</span> <span class="pre">0</span></code> assumes there are only 3 images,
and so we need to change it to <code class="docutils literal"><span class="pre">if</span> <span class="pre">(state</span> <span class="pre">==</span> <span class="pre">images.size())</span> <span class="pre">state</span> <span class="pre">=</span> <span class="pre">0</span></code>. The
expression <code class="docutils literal"><span class="pre">images.size()</span></code> returns the number of <code class="docutils literal"><span class="pre">PImage</span></code> objects in
<code class="docutils literal"><span class="pre">images</span></code>.</p>
<p>Running the program again, we see the same as before. This means our changes
are likely correct.</p>
</div>
<div class="section" id="using-more-images">
<h2>Using More Images<a class="headerlink" href="#using-more-images" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ve now generalized the <code class="docutils literal"><span class="pre">Mario</span></code> class so that it will work with any number
of images. Lets test that by adding a few more:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">images</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">PImage</span><span class="o">&gt;();</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk1.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk2.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk3.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk4.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk5.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk6.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk7.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk8.png&quot;</span><span class="o">));</span>

  <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This works! No matter how many images you add to the <code class="docutils literal"><span class="pre">images</span></code> <code class="docutils literal"><span class="pre">ArrayList</span></code>,
the <code class="docutils literal"><span class="pre">Mario</span></code> objects will display them all.</p>
</div>
<div class="section" id="questions">
<h2>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">In <code class="docutils literal"><span class="pre">setup()</span></code>, the images are added like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk1.png&quot;</span><span class="o">));</span>
<span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk2.png&quot;</span><span class="o">));</span>
<span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk3.png&quot;</span><span class="o">));</span>
<span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk4.png&quot;</span><span class="o">));</span>
<span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk5.png&quot;</span><span class="o">));</span>
<span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk6.png&quot;</span><span class="o">));</span>
<span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk7.png&quot;</span><span class="o">));</span>
<span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk8.png&quot;</span><span class="o">));</span>
</pre></div>
</div>
<p>Replace these lines of code with a while-loop where <code class="docutils literal"><span class="pre">images.add</span></code> is only
called once inside the while-loop body.</p>
</li>
</ol>
</div>
<div class="section" id="source-code">
<h2>Source Code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>For this code to work, you must put these files in your program&#8217;s <code class="docutils literal"><span class="pre">data</span></code>
folder: <a class="reference download internal" href="_downloads/marioWalk1.png" download=""><code class="xref download docutils literal"><span class="pre">marioWalk1.png</span></code></a>,
<a class="reference download internal" href="_downloads/marioWalk2.png" download=""><code class="xref download docutils literal"><span class="pre">marioWalk2.png</span></code></a>,
<a class="reference download internal" href="_downloads/marioWalk3.png" download=""><code class="xref download docutils literal"><span class="pre">marioWalk3.png</span></code></a>,
<a class="reference download internal" href="_downloads/marioWalk4.png" download=""><code class="xref download docutils literal"><span class="pre">marioWalk4.png</span></code></a>,
<a class="reference download internal" href="_downloads/marioWalk5.png" download=""><code class="xref download docutils literal"><span class="pre">marioWalk5.png</span></code></a>,
<a class="reference download internal" href="_downloads/marioWalk6.png" download=""><code class="xref download docutils literal"><span class="pre">marioWalk6.png</span></code></a>,
<a class="reference download internal" href="_downloads/marioWalk7.png" download=""><code class="xref download docutils literal"><span class="pre">marioWalk7.png</span></code></a>,
<a class="reference download internal" href="_downloads/marioWalk8.png" download=""><code class="xref download docutils literal"><span class="pre">marioWalk8.png</span></code></a>.</p>
<p>Here is a single .zip archive of all the Mario images:
<a class="reference download internal" href="_downloads/marioWalk.zip" download=""><code class="xref download docutils literal"><span class="pre">marioWalk.zip</span></code></a>.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Sprite</span> <span class="o">{</span>
  <span class="kt">float</span> <span class="n">x</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">y</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">dx</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">dy</span><span class="o">;</span>

  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Timer</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">startTime</span><span class="o">;</span>

  <span class="n">Timer</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">reset</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kt">int</span> <span class="nf">elapsedMillis</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">millis</span><span class="o">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">reset</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">startTime</span> <span class="o">=</span> <span class="n">millis</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>


<span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">PImage</span><span class="o">&gt;</span> <span class="n">images</span><span class="o">;</span>

<span class="kd">final</span> <span class="kt">int</span> <span class="n">NUM_MARIOS</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Mario</span><span class="o">&gt;</span> <span class="n">marios</span><span class="o">;</span>

<span class="n">Mario</span> <span class="nf">randomMario</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">Mario</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mario</span><span class="o">();</span>

  <span class="n">m</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">490</span><span class="o">);</span>
  <span class="n">m</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">490</span><span class="o">);</span>
  <span class="n">m</span><span class="o">.</span><span class="na">dx</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="mf">2.0</span><span class="o">,</span> <span class="mf">2.0</span><span class="o">);</span>
  <span class="n">m</span><span class="o">.</span><span class="na">dy</span> <span class="o">=</span> <span class="n">random</span><span class="o">(-</span><span class="mf">2.0</span><span class="o">,</span> <span class="mf">2.0</span><span class="o">);</span>
  <span class="n">m</span><span class="o">.</span><span class="na">imgShowMillis</span> <span class="o">=</span> <span class="kt">int</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">100</span><span class="o">,</span> <span class="mi">400</span><span class="o">));</span>
  <span class="n">m</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">random</span><span class="o">(</span><span class="mf">0.5</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>

  <span class="k">return</span> <span class="n">m</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">images</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">PImage</span><span class="o">&gt;();</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk1.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk2.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk3.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk4.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk5.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk6.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk7.png&quot;</span><span class="o">));</span>
  <span class="n">images</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">loadImage</span><span class="o">(</span><span class="s">&quot;marioWalk8.png&quot;</span><span class="o">));</span>

  <span class="n">marios</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Mario</span><span class="o">&gt;();</span>
  <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="k">while</span> <span class="o">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">NUM_MARIOS</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Mario</span> <span class="n">m</span> <span class="o">=</span> <span class="n">randomMario</span><span class="o">();</span>
    <span class="n">marios</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">m</span><span class="o">);</span>
    <span class="o">++</span><span class="n">i</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>

  <span class="k">for</span> <span class="o">(</span><span class="n">Mario</span> <span class="n">m</span> <span class="o">:</span> <span class="n">marios</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">m</span><span class="o">.</span><span class="na">render</span><span class="o">();</span>
    <span class="n">m</span><span class="o">.</span><span class="na">update</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Mario</span> <span class="kd">extends</span> <span class="n">Sprite</span> <span class="o">{</span>
  <span class="kt">float</span> <span class="n">size</span><span class="o">;</span>

  <span class="kt">int</span> <span class="n">state</span><span class="o">;</span>
  <span class="n">Timer</span> <span class="n">timer</span><span class="o">;</span>
  <span class="kt">int</span> <span class="n">imgShowMillis</span><span class="o">;</span>  <span class="c1">// how long to show one image for</span>

  <span class="n">Mario</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">timer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Timer</span><span class="o">();</span>
    <span class="n">imgShowMillis</span> <span class="o">=</span> <span class="mi">200</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">render</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">pushMatrix</span><span class="o">();</span>
    <span class="n">scale</span><span class="o">(</span><span class="n">size</span><span class="o">);</span>

    <span class="n">image</span><span class="o">(</span><span class="n">images</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">state</span><span class="o">),</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">timer</span><span class="o">.</span><span class="na">elapsedMillis</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">imgShowMillis</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">state</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">images</span><span class="o">.</span><span class="na">size</span><span class="o">())</span> <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>  <span class="c1">// fix state if necessary</span>
      <span class="n">timer</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="n">popMatrix</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="nf">update</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>

    <span class="c1">// wrap-around the screen if necessary</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">width</span> <span class="o">/</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">width</span> <span class="o">/</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">height</span> <span class="o">/</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="n">height</span> <span class="o">/</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             >next</a> |</li>
        <li class="right" >
          <a href="mario_walk.html" title="Simple Multi-image Animation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Toby Donaldson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>