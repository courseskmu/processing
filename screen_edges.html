<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Detecting the Edges of the Screen &mdash; CMPT 166 Fall 2016 1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CMPT 166 Fall 2016 1 documentation" href="index.html" />
    <link rel="next" title="Logical Expressions" href="logical_expressions.html" />
    <link rel="prev" title="Making Things Move" href="movement.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="logical_expressions.html" title="Logical Expressions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="movement.html" title="Making Things Move"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Detecting the Edges of the Screen</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#detecting-the-bottom-edge">Detecting the Bottom Edge</a></li>
<li><a class="reference internal" href="#adding-velocity">Adding Velocity</a></li>
<li><a class="reference internal" href="#changing-the-color">Changing the Color</a></li>
<li><a class="reference internal" href="#checking-for-the-top-edge">Checking for the Top Edge</a></li>
<li><a class="reference internal" href="#checking-for-the-left-and-right-edges">Checking for the Left and Right Edges</a></li>
<li><a class="reference internal" href="#bouncing-off-edges-of-the-ball">Bouncing Off Edges of the Ball</a></li>
<li><a class="reference internal" href="#adjust-the-ball-s-position-on-a-bounce">Adjust the Ball&#8217;s Position on a Bounce</a></li>
<li><a class="reference internal" href="#questions">Questions</a></li>
<li><a class="reference internal" href="#programming-questions">Programming Questions</a></li>
<li><a class="reference internal" href="#final-program">Final Program</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="movement.html"
                        title="previous chapter">Making Things Move</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="logical_expressions.html"
                        title="next chapter">Logical Expressions</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="detecting-the-edges-of-the-screen">
<h1>Detecting the Edges of the Screen<a class="headerlink" href="#detecting-the-edges-of-the-screen" title="Permalink to this headline">¶</a></h1>
<p>In these notes you will learn:</p>
<ul class="simple">
<li>How to test if a point has hit an edge of the screen.</li>
<li>Some basic uses of if-statements.</li>
<li>The structure and terminology of basic if-statements.</li>
<li>How to use variables to control the velocity of a ball.</li>
</ul>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In this note we&#8217;ll see how to get an object to recognize the edges of the
screen by using <a class="reference internal" href="glossary.html#term-if-statement"><span class="xref std std-term">if-statement</span></a>s.</p>
</div>
<div class="section" id="detecting-the-bottom-edge">
<h2>Detecting the Bottom Edge<a class="headerlink" href="#detecting-the-bottom-edge" title="Permalink to this headline">¶</a></h2>
<p>Lets start with a program that makes a ball move slowly down the screen. When
the ball hits the bottom, it disappears:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">float</span> <span class="n">x</span><span class="o">;</span>  <span class="c1">// (x, y) is the center</span>
<span class="kt">float</span> <span class="n">y</span><span class="o">;</span>  <span class="c1">// of the ball</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">=</span> <span class="mi">250</span><span class="o">;</span> <span class="c1">// start near the top middle</span>
  <span class="n">y</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>  <span class="c1">// of the screen</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>  <span class="c1">// draw the background</span>

  <span class="c1">// draw the ball</span>
  <span class="n">noStroke</span><span class="o">();</span>
  <span class="n">fill</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">50</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">+=</span> <span class="mi">0</span><span class="o">;</span>  <span class="c1">// add 0 to x</span>
  <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>  <span class="c1">// add 1 to y</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Now lets modify this so that the ball <strong>wraps-around</strong> to the top of the
screen. The means after it hits the bottom, it jumps back to the top.</p>
<p>To do this, we need to know when the ball has hit the bottom. We can do that
by adding an <strong>if-statement</strong> after <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">y</span></code> are incremented:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="c1">// ...</span>

  <span class="n">x</span> <span class="o">+=</span> <span class="mi">0</span><span class="o">;</span>  <span class="c1">// add 0 to x</span>
  <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span><span class="o">;</span>  <span class="c1">// add 1 to y</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>        <span class="c1">// set y to be 0</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Every time <code class="docutils literal"><span class="pre">draw()</span></code> runs, it now checks to see if <code class="docutils literal"><span class="pre">y</span></code> is bigger than 499,
i.e. if the ball has hit, or passed, the bottom of the screen.</p>
<p>If it has hit the bottom, then <code class="docutils literal"><span class="pre">y</span></code> is set to 0 so that on the next call to
<code class="docutils literal"><span class="pre">draw()</span></code> the ball starts at the top. This gives the appearance of wrapping-
around the screen.</p>
</div>
<div class="section" id="adding-velocity">
<h2>Adding Velocity<a class="headerlink" href="#adding-velocity" title="Permalink to this headline">¶</a></h2>
<p>Now lets make a useful improvement to our program. In addition to a position,
all animated objects also have a <strong>velocity</strong>, which is the speed <em>and</em>
direction the object is travelling in.</p>
<p>We will often want to change the velocity of an object, e.g. make it stop or
slow down or speed up. To make that possible, the velocity must be represented
as variables so that we can, when needed, vary the velocity.</p>
<p>The standard names for the velocity variables are <code class="docutils literal"><span class="pre">dx</span></code> and <code class="docutils literal"><span class="pre">dy</span></code>, where the
<em>d</em> stands for &#8220;difference&#8221;. For example, <code class="docutils literal"><span class="pre">dx</span></code> is the difference in the
<code class="docutils literal"><span class="pre">x</span></code> values in two consecutive calls to <code class="docutils literal"><span class="pre">draw()</span></code>.</p>
<p>Now lets re-write the above program using <code class="docutils literal"><span class="pre">dx</span></code> and <code class="docutils literal"><span class="pre">dy</span></code>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">float</span> <span class="n">x</span><span class="o">;</span>  <span class="c1">// (x, y) is the center</span>
<span class="kt">float</span> <span class="n">y</span><span class="o">;</span>  <span class="c1">// of the ball</span>

<span class="kt">float</span> <span class="n">dx</span><span class="o">;</span> <span class="c1">// left/right velocity</span>
<span class="kt">float</span> <span class="n">dy</span><span class="o">;</span> <span class="c1">// up/down velocity</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">=</span> <span class="mi">250</span><span class="o">;</span> <span class="c1">// start near the top middle</span>
  <span class="n">y</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>  <span class="c1">// of the screen</span>

  <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="c1">// initialize the velocity so</span>
  <span class="n">dy</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="c1">// its moving downwards only</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>  <span class="c1">// draw the background</span>

  <span class="c1">// draw the ball</span>
  <span class="n">noStroke</span><span class="o">();</span>
  <span class="n">fill</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">50</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>  <span class="c1">// add dx to x</span>
  <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>  <span class="c1">// add dy to y</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>        <span class="c1">// set y to be 0</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The behaviour should be the same as before, but now we can more easily control
the ball&#8217;s velocity.</p>
<p>For example, to make the ball stop when it hits the bottom edge, change the
if-statement to this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
  <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>       <span class="c1">// set stop the ball</span>
  <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Setting both <code class="docutils literal"><span class="pre">dx</span></code> and <code class="docutils literal"><span class="pre">dy</span></code> to 0 immediately stops the ball.</p>
<p>Or, if want to make the ball reverse direction, we would change the if-
statement to this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
  <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>     <span class="c1">// reverse the y-direction</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The statement <code class="docutils literal"><span class="pre">dy</span> <span class="pre">=</span> <span class="pre">-dy</span></code> means &#8220;assign to <code class="docutils literal"><span class="pre">dy</span></code> the negation of <code class="docutils literal"><span class="pre">dy</span></code>&#8221;.
This flips the sign of <code class="docutils literal"><span class="pre">dy</span></code>, which has the effect of changing the ball&#8217;s
direction.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>All</em> the 2-dimensional animated objects we create in this course will
have, at least, these four variables: <code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>, <code class="docutils literal"><span class="pre">dx</span></code>, and <code class="docutils literal"><span class="pre">dy</span></code>.
Some objects might have (many!) more, but these are the minimum set of
variables we need to do interesting animation.</p>
</div>
</div>
<div class="section" id="changing-the-color">
<h2>Changing the Color<a class="headerlink" href="#changing-the-color" title="Permalink to this headline">¶</a></h2>
<p>We can run any code we like when the ball hits the bottom of the screen. Lets
make the ball&#8217;s color change to a random new color when it hits the bottom.</p>
<p>Since its color now varies, we&#8217;ll store its color in  a variable called
<code class="docutils literal"><span class="pre">ballFillColor</span></code> to store its color. Here is the modified program:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">float</span> <span class="n">x</span><span class="o">;</span>  <span class="c1">// (x, y) is the center</span>
<span class="kt">float</span> <span class="n">y</span><span class="o">;</span>  <span class="c1">// of the ball</span>

<span class="kt">float</span> <span class="n">dx</span><span class="o">;</span> <span class="c1">// left/right velocity</span>
<span class="kt">float</span> <span class="n">dy</span><span class="o">;</span> <span class="c1">// up/down velocity</span>

<span class="n">color</span> <span class="n">ballFillColor</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">=</span> <span class="mi">250</span><span class="o">;</span> <span class="c1">// start near the top middle</span>
  <span class="n">y</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>  <span class="c1">// of the screen</span>

  <span class="n">dx</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="c1">// initialize the velocity so</span>
  <span class="n">dy</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="c1">// its moving downwards only</span>

  <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>  <span class="c1">// draw the background</span>

  <span class="c1">// draw the ball</span>
  <span class="n">noStroke</span><span class="o">();</span>
  <span class="n">fill</span><span class="o">(</span><span class="n">ballFillColor</span><span class="o">);</span>
  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">50</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>  <span class="c1">// add dx to x</span>
  <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>  <span class="c1">// add dy to y</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>     <span class="c1">// flip its sign and give it a random color</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">));</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="checking-for-the-top-edge">
<h2>Checking for the Top Edge<a class="headerlink" href="#checking-for-the-top-edge" title="Permalink to this headline">¶</a></h2>
<p>Currently, our program only checks for the bottom edge of the screen. If we
want to check for other edges, then we need to add if-statements that check
for each edge:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="c1">// ...</span>

  <span class="c1">// check if hit the bottom edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>     <span class="c1">// flip its sign and give it a random color</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="c1">// check if hit the top edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is less than 0, then</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>   <span class="c1">// flip its sign and give it a random color</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If you run the program now, the ball will bounce up and down forever, changing
to a random color after each bounce.</p>
</div>
<div class="section" id="checking-for-the-left-and-right-edges">
<h2>Checking for the Left and Right Edges<a class="headerlink" href="#checking-for-the-left-and-right-edges" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ve set <code class="docutils literal"><span class="pre">dx</span></code> to 0 in our program, which means the ball does not move left
or right at all. But if we set it to some non-zero value, then it will
eventually hit the left or right edge. So lets check for those two edges:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="c1">// ...</span>

  <span class="c1">// check if hit the left edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if x is less than 0, then</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>   <span class="c1">// flip its sign</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// check if hit the top edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>     <span class="c1">// flip its sign</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Notice that we check the value of <code class="docutils literal"><span class="pre">x</span></code> here (instead of <code class="docutils literal"><span class="pre">y</span></code>), and that we
flip the sign of <code class="docutils literal"><span class="pre">dx</span></code> (instead of <code class="docutils literal"><span class="pre">dy</span></code>).</p>
<p>When you test this program, make sure to set both <code class="docutils literal"><span class="pre">dx</span></code> and <code class="docutils literal"><span class="pre">dy</span></code> to non-
zero values.</p>
</div>
<div class="section" id="bouncing-off-edges-of-the-ball">
<h2>Bouncing Off Edges of the Ball<a class="headerlink" href="#bouncing-off-edges-of-the-ball" title="Permalink to this headline">¶</a></h2>
<p>For simplicity, we&#8217;ve been making the ball bounce when its <em>center</em> point hits
an edge. The problem with this is that the ball goes half-way off the screen
on each edge, e.g:</p>
<a class="reference internal image-reference" href="_images/halfBall.png"><img alt="A ball half-way through the bottom edge of the screen." class="align-center" src="_images/halfBall.png" style="width: 61.5px; height: 35.25px;" /></a>
<p>Instead, suppose we want the ball to stop when its outside edge hits the a
screen edge. Since the screen has four edges, we need to keep track of four
different points on the ball:</p>
<ul class="simple">
<li>the top-most point, (<code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span> <span class="pre">-</span> <span class="pre">25</span></code>)</li>
<li>the bottom-most point, (<code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span> <span class="pre">+</span> <span class="pre">25</span></code>)</li>
<li>the left-most point, (<code class="docutils literal"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">25</span></code>, <code class="docutils literal"><span class="pre">y</span></code>)</li>
<li>the right-most point, (<code class="docutils literal"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">25</span></code>, <code class="docutils literal"><span class="pre">y</span></code>)</li>
</ul>
<a class="reference internal image-reference" href="_images/circlePoints.png"><img alt="Four points in the edge of a circle." class="align-center" src="_images/circlePoints.png" style="width: 267.0px; height: 202.0px;" /></a>
<p>We need to modify the four if-statements to check for these points instead of
(<code class="docutils literal"><span class="pre">x</span></code>, <code class="docutils literal"><span class="pre">y</span></code>):</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="c1">// ...</span>

  <span class="c1">// check if hit the bottom edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">25</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">// ...</span>
  <span class="o">}</span>

  <span class="c1">// check if hit the top edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="mi">25</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">// ...</span>
  <span class="o">}</span>

  <span class="c1">// check if hit the left edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">25</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">// ...</span>
  <span class="o">}</span>

  <span class="c1">// check if hit the top edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">25</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>
     <span class="c1">// ...</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
<p>Be careful to get all the arithmetic exactly right!</p>
</div>
<div class="section" id="adjust-the-ball-s-position-on-a-bounce">
<h2>Adjust the Ball&#8217;s Position on a Bounce<a class="headerlink" href="#adjust-the-ball-s-position-on-a-bounce" title="Permalink to this headline">¶</a></h2>
<p>It is useful to add one more small feature to this program. When a fast-moving
ball hits an edge, it&#8217;s possible that it goes a few pixels past the edge. In
other words, the ball can be slightly embedded in the edge. When we reverse
the direction of a ball embedded in an edge, it&#8217;s possible that the ball could
get stuck forever.</p>
<p>We will try to prevent that problem by adjusting the position of the ball
after it hits an edge. When we reverse the ball, we will also <em>move</em> it a
little so that it is precisely on the edge. That way it will hopefully never
get caught in an edge.</p>
<p>To implement this, we will need to modify the if-statements. For example:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// check if hit the bottom edge</span>
<span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">25</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>        <span class="c1">// flip its sign</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">499</span> <span class="o">-</span> <span class="mi">50</span><span class="o">;</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The statement <code class="docutils literal"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">499</span> <span class="pre">-</span> <span class="pre">50</span></code> was added. It makes sure that the ball is
exactly on the edge when it reverses direction.</p>
<p>For the top edge, the if-statement becomes this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="c1">// check if hit the top edge</span>
<span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="mi">25</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is less than 0, then</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>      <span class="c1">// flip its sign</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The statement <code class="docutils literal"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">25</span></code> has been added.</p>
<p>The if-statements for the left and right edges are modified in a similar way,
except the variable <code class="docutils literal"><span class="pre">x</span></code> is used instead of <code class="docutils literal"><span class="pre">y</span></code>.</p>
</div>
<div class="section" id="questions">
<h2>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>In brief, clear English, describe the purpose of an if-statement. Show how
it works using a simple example.</li>
<li>Why is the body of an if-statement indented?</li>
<li>What do the variables <code class="docutils literal"><span class="pre">dx</span></code> and <code class="docutils literal"><span class="pre">dy</span></code> mean in these programs?</li>
<li>In the program developed in the notes, we checked for edges in this order:
bottom, top, left, and right. Would the program still work if we changed
the order the edges were checked?</li>
</ol>
</div>
<div class="section" id="programming-questions">
<h2>Programming Questions<a class="headerlink" href="#programming-questions" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Modify the final program below so that when the ball hits an edge it wraps-
around (i.e. immediately jumps) to the opposite edge. Make sure no part of
the ball is ever drawn off the screen.</p>
</li>
<li><p class="first">Modify the final program below so that an image bounces around the screen
instead of a ball. Make sure that no part of the image ever goes off the
screen, i.e. it should bounce off its edges just like the ball.</p>
</li>
<li><p class="first">Modify the final program below so that ball changes to a random color every
time it hits an edge. Use this expression create a random color:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">color</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">))</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="final-program">
<h2>Final Program<a class="headerlink" href="#final-program" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java"><div class="highlight"><pre><span class="kt">float</span> <span class="n">x</span><span class="o">;</span>  <span class="c1">// (x, y) is the center</span>
<span class="kt">float</span> <span class="n">y</span><span class="o">;</span>  <span class="c1">// of the ball</span>

<span class="kt">float</span> <span class="n">dx</span><span class="o">;</span> <span class="c1">// left/right velocity</span>
<span class="kt">float</span> <span class="n">dy</span><span class="o">;</span> <span class="c1">// up/down velocity</span>

<span class="n">color</span> <span class="n">ballFillColor</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">size</span><span class="o">(</span><span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">=</span> <span class="mi">250</span><span class="o">;</span> <span class="c1">// start near the top middle</span>
  <span class="n">y</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>  <span class="c1">// of the screen</span>

  <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">;</span> <span class="c1">// initialize the velocity so</span>
  <span class="n">dy</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>  <span class="c1">// its moving downwards only</span>

  <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="mi">255</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">background</span><span class="o">(</span><span class="mi">255</span><span class="o">);</span>  <span class="c1">// draw the background</span>

  <span class="c1">// draw the ball</span>
  <span class="n">noStroke</span><span class="o">();</span>
  <span class="n">fill</span><span class="o">(</span><span class="n">ballFillColor</span><span class="o">);</span>
  <span class="n">ellipse</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">50</span><span class="o">,</span> <span class="mi">50</span><span class="o">);</span>

  <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span><span class="o">;</span>  <span class="c1">// add dx to x</span>
  <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span><span class="o">;</span>  <span class="c1">// add dy to y</span>

  <span class="c1">// check if hit the bottom edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">25</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>     <span class="c1">// flip its sign</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="c1">// check if hit the top edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">y</span> <span class="o">-</span> <span class="mi">25</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is less than 0, then</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="o">-</span><span class="n">dy</span><span class="o">;</span>   <span class="c1">// flip its sign</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="c1">// check if hit the left edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">25</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if x is less than 0, then</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>   <span class="c1">// flip its sign</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="c1">// check if hit the top edge</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">25</span> <span class="o">&gt;</span> <span class="mi">499</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// if y is greater than 499, then</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="o">-</span><span class="n">dx</span><span class="o">;</span>   <span class="c1">// flip its sign</span>
    <span class="n">ballFillColor</span> <span class="o">=</span> <span class="n">color</span><span class="o">(</span><span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">),</span> <span class="n">random</span><span class="o">(</span><span class="mi">256</span><span class="o">));</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="logical_expressions.html" title="Logical Expressions"
             >next</a> |</li>
        <li class="right" >
          <a href="movement.html" title="Making Things Move"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CMPT 166 Fall 2016 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Toby Donaldson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>